# --- Simulation time control parameters ---
time.stop_time                           = 20000.0             # Max (simulated) time to evolve [s]
time.max_step                            = 80000               
time.fixed_dt                            = 0.25                # Fixed timestep size (in seconds). If negative, then time.cfl is used
time.checkpoint_interval                 = 2000                
incflo.physics                           = ABL                 # List of physics models to include in simulation.
incflo.verbose                           = 3                   
io.check_file                            = chk                 
incflo.use_godunov                       = true                
incflo.godunov_type                      = weno_z              
incflo.diffusion_type                    = 0                   # Type of diffusion scheme used.  0 = explicit diffusion, 1 = Crank-Nicolson, 2 = fully implicit
turbulence.model                         = OneEqKsgsM84        
TKE.source_terms                         = KsgsM84Src          
nodal_proj.mg_rtol                       = 1e-06               
nodal_proj.mg_atol                       = 1e-12               
mac_proj.mg_rtol                         = 1e-06               
mac_proj.mg_atol                         = 1e-12               
diffusion.mg_rtol                        = 1e-06               
diffusion.mg_atol                        = 1e-12               
temperature_diffusion.mg_rtol            = 1e-10               
temperature_diffusion.mg_atol            = 1e-13               
incflo.gravity                           = 0.0 0.0 -9.81       # Gravitational acceleration vector (x,y,z) [m/s^2]
incflo.density                           = 1.17                # Fluid density [kg/m^3]
transport.viscosity                      = 1.853e-05           # Fluid dynamic viscosity [kg/m-s]
transport.laminar_prandtl                = 0.7                 # Laminar prandtl number
transport.turbulent_prandtl              = 0.3333              # Turbulent prandtl number

# --- Geometry and Mesh ---
geometry.prob_lo                         = 588800.0 3978800.0 0.0
geometry.prob_hi                         = 691200.0 4081200.0 2560.0
amr.n_cell                               = 5120 5120 128       # Number of cells in x, y, and z directions
amr.max_level                            = 2                   
geometry.is_periodic                     = 1 1 0               
zlo.type                                 = wall_model          
zlo.temperature_type                     = wall_model          
zlo.tke_type                             = zero_gradient       
zhi.type                                 = slip_wall           
zhi.temperature_type                     = fixed_gradient      
zhi.temperature                          = 0.003               

# --- ABL parameters ---
ICNS.source_terms                        = ABLForcing BoussinesqBuoyancy CoriolisForcing   
ABL.stats_output_frequency               = 1                   
ABL.stats_output_format                  = netcdf              
incflo.velocity                          = -0.7844016847289241 8.96575228282571 0.0
ABLForcing.abl_forcing_height            = 91.0                
ABL.kappa                                = 0.4                 
ABL.normal_direction                     = 2                   
ABL.surface_roughness_z0                 = 0.15                
ABL.reference_temperature                = 303.803             
ABL.surface_temp_rate                    = 0.0                 
ABL.surface_temp_flux                    = 0.0442              # Surface temperature flux [K-m/s]
ABL.mo_beta_m                            = 16.0                # Monin-Obukhov Beta m parameter
ABL.mo_gamma_m                           = 5.0                 # Monin-Obukhov Gamma m parameter
ABL.mo_gamma_h                           = 5.0                 # Monin-Obukhov Gamma h parameter
ABL.random_gauss_mean                    = 0.0                 
ABL.random_gauss_var                     = 1.0                 
CoriolisForcing.latitude                 = 36.57236455833334   
CoriolisForcing.rotational_time_period   = 86164.0900027328    
CoriolisForcing.north_vector             = 0.0 1.0 0.0         
CoriolisForcing.east_vector              = 1.0 0.0 0.0         
BoussinesqBuoyancy.reference_temperature = 303.803             
ABL.temperature_heights                  = 0       1400.0  1500.0  2560.0
ABL.temperature_values                   = 305.803 305.803 313.803 314.553
ABL.perturb_velocity                     = true                
ABL.perturb_ref_height                   = 50.0                
ABL.Uperiods                             = 4.0                 
ABL.Vperiods                             = 4.0                 
ABL.deltaU                               = 1.0                 
ABL.deltaV                               = 1.0                 
ABL.perturb_temperature                  = false               
time.plot_interval                       = 1000                
io.plot_file                             = plt                 
io.KE_int                                = -1                  

#---- tagging defs ----
tagging.labels                           = Farm_level_0_zone TR KP AF BR CV
tagging.Farm_level_0_zone.type           = GeometryRefinement  
tagging.Farm_level_0_zone.shapes         = Farm_level_0_zone   
tagging.Farm_level_0_zone.level          = 0                   
tagging.Farm_level_0_zone.Farm_level_0_zone.type = box                 
tagging.Farm_level_0_zone.Farm_level_0_zone.origin = 682462.4602060996 4003600.388767154 -16.358595194085026
tagging.Farm_level_0_zone.Farm_level_0_zone.xaxis = -5229.344564859494 59771.68188550473 0.0
tagging.Farm_level_0_zone.Farm_level_0_zone.yaxis = -79695.57584733964 -6972.459419812659 0.0
tagging.Farm_level_0_zone.Farm_level_0_zone.zaxis = 0.0 0.0 1100.0      
tagging.TR.type                          = GeometryRefinement  
tagging.TR.shapes                        = TR                  
tagging.TR.level                         = 1                   
tagging.TR.TR.type                       = box                 
tagging.TR.TR.origin                     = 674791.6460874033 4041868.3236167836 0.0
tagging.TR.TR.xaxis                      = -1525.2254980840191 17433.40721660555 0.0
tagging.TR.TR.yaxis                      = -41840.17731985331 -3660.541195401646 0.0
tagging.TR.TR.zaxis                      = 0.0 0.0 350.0       
tagging.KP.type                          = GeometryRefinement  
tagging.KP.shapes                        = KP                  
tagging.KP.level                         = 1                   
tagging.KP.KP.type                       = box                 
tagging.KP.KP.origin                     = 653106.1017967543 4023617.986548658 0.0
tagging.KP.KP.xaxis                      = -1220.1803984672154 13946.725773284437 0.0
tagging.KP.KP.yaxis                      = -24904.867452293638 -2178.893568691456 0.0
tagging.KP.KP.zaxis                      = 0.0 0.0 350.0       
tagging.AF.type                          = GeometryRefinement  
tagging.AF.shapes                        = AF                  
tagging.AF.level                         = 1                   
tagging.AF.AF.type                       = box                 
tagging.AF.AF.origin                     = 643411.146896371 4008131.3051053365 0.0
tagging.AF.AF.xaxis                      = -1743.1148549531647 19923.89396183491 0.0
tagging.AF.AF.yaxis                      = -24904.867452293638 -2178.893568691456 0.0
tagging.AF.AF.zaxis                      = 0.0 0.0 350.0       
tagging.BR.type                          = GeometryRefinement  
tagging.BR.shapes                        = BR                  
tagging.BR.level                         = 1                   
tagging.BR.BR.type                       = box                 
tagging.BR.BR.origin                     = 627314.3752538164 4031799.622892362 0.0
tagging.BR.BR.xaxis                      = -610.0901992336077 6973.362886642219 0.0
tagging.BR.BR.yaxis                      = -17931.50456565142 -1568.8033694578482 0.0
tagging.BR.BR.zaxis                      = 0.0 0.0 350.0       
tagging.CV.type                          = GeometryRefinement  
tagging.CV.shapes                        = CV                  
tagging.CV.level                         = 1                   
tagging.CV.CV.type                       = box                 
tagging.CV.CV.origin                     = 632818.2832007611 4041258.2334175496 0.0
tagging.CV.CV.xaxis                      = -1307.3361412148736 14942.920471376183 0.0
tagging.CV.CV.yaxis                      = -27893.451546568875 -2440.3607969344307 0.0
tagging.CV.CV.zaxis                      = 0.0 0.0 350.0       

#---- postprocessing defs ----
incflo.post_processing                   = farmhh TR_z90hh KP_z90hh AF_z90hh BR_z90hh CV_z90hh TR_z60ti KP_z60ti AF_z60ti BR_z60ti CV_z60ti
farmhh.type                              = Sampling            
farmhh.output_frequency                  = 100                 
farmhh.fields                            = velocity temperature tke
TR_z90hh.type                            = Sampling            
TR_z90hh.output_frequency                = 100                 
TR_z90hh.fields                          = velocity            
KP_z90hh.type                            = Sampling            
KP_z90hh.output_frequency                = 100                 
KP_z90hh.fields                          = velocity            
AF_z90hh.type                            = Sampling            
AF_z90hh.output_frequency                = 100                 
AF_z90hh.fields                          = velocity            
BR_z90hh.type                            = Sampling            
BR_z90hh.output_frequency                = 100                 
BR_z90hh.fields                          = velocity            
CV_z90hh.type                            = Sampling            
CV_z90hh.output_frequency                = 100                 
CV_z90hh.fields                          = velocity            
TR_z60ti.type                            = Sampling            
TR_z60ti.output_frequency                = 100                 
TR_z60ti.fields                          = velocity            
KP_z60ti.type                            = Sampling            
KP_z60ti.output_frequency                = 100                 
KP_z60ti.fields                          = velocity            
AF_z60ti.type                            = Sampling            
AF_z60ti.output_frequency                = 100                 
AF_z60ti.fields                          = velocity            
BR_z60ti.type                            = Sampling            
BR_z60ti.output_frequency                = 100                 
BR_z60ti.fields                          = velocity            
CV_z60ti.type                            = Sampling            
CV_z60ti.output_frequency                = 100                 
CV_z60ti.fields                          = velocity            

#---- sample defs ----
farmhh.labels                            = Farm_hh             
TR_z90hh.labels                          = Farm_TR90           
KP_z90hh.labels                          = Farm_KP90           
AF_z90hh.labels                          = Farm_AF90           
BR_z90hh.labels                          = Farm_BR90           
CV_z90hh.labels                          = Farm_CV90           
TR_z60ti.labels                          = Farm_TR60           
KP_z60ti.labels                          = Farm_KP60           
AF_z60ti.labels                          = Farm_AF60           
BR_z60ti.labels                          = Farm_BR60           
CV_z60ti.labels                          = Farm_CV60           
farmhh.Farm_hh.type                      = PlaneSampler        
farmhh.Farm_hh.num_points                = 257 257             
farmhh.Farm_hh.origin                    = 588800.0 3978800.0 90.0
farmhh.Farm_hh.axis1                     = 0.0 102400.0 0.0    
farmhh.Farm_hh.axis2                     = 102400.0 0.0 0.0    
farmhh.Farm_hh.normal                    = 0.0 0.0 0.0         
TR_z90hh.Farm_TR90.type                  = PlaneSampler        
TR_z90hh.Farm_TR90.num_points            = 176 421             
TR_z90hh.Farm_TR90.origin                = 674791.6460874033 4041868.3236167836 90.0
TR_z90hh.Farm_TR90.axis1                 = -1525.2254980840191 17433.40721660555 0.0
TR_z90hh.Farm_TR90.axis2                 = -41840.17731985331 -3660.541195401646 0.0
TR_z90hh.Farm_TR90.normal                = 0.0 0.0 0.0         
KP_z90hh.Farm_KP90.type                  = PlaneSampler        
KP_z90hh.Farm_KP90.num_points            = 141 251             
KP_z90hh.Farm_KP90.origin                = 653106.1017967543 4023617.986548658 90.0
KP_z90hh.Farm_KP90.axis1                 = -1220.1803984672154 13946.725773284437 0.0
KP_z90hh.Farm_KP90.axis2                 = -24904.867452293638 -2178.893568691456 0.0
KP_z90hh.Farm_KP90.normal                = 0.0 0.0 0.0         
AF_z90hh.Farm_AF90.type                  = PlaneSampler        
AF_z90hh.Farm_AF90.num_points            = 201 251             
AF_z90hh.Farm_AF90.origin                = 643411.146896371 4008131.3051053365 90.0
AF_z90hh.Farm_AF90.axis1                 = -1743.1148549531647 19923.89396183491 0.0
AF_z90hh.Farm_AF90.axis2                 = -24904.867452293638 -2178.893568691456 0.0
AF_z90hh.Farm_AF90.normal                = 0.0 0.0 0.0         
BR_z90hh.Farm_BR90.type                  = PlaneSampler        
BR_z90hh.Farm_BR90.num_points            = 71 181              
BR_z90hh.Farm_BR90.origin                = 627314.3752538164 4031799.622892362 90.0
BR_z90hh.Farm_BR90.axis1                 = -610.0901992336077 6973.362886642219 0.0
BR_z90hh.Farm_BR90.axis2                 = -17931.50456565142 -1568.8033694578482 0.0
BR_z90hh.Farm_BR90.normal                = 0.0 0.0 0.0         
CV_z90hh.Farm_CV90.type                  = PlaneSampler        
CV_z90hh.Farm_CV90.num_points            = 151 281             
CV_z90hh.Farm_CV90.origin                = 632818.2832007611 4041258.2334175496 90.0
CV_z90hh.Farm_CV90.axis1                 = -1307.3361412148736 14942.920471376183 0.0
CV_z90hh.Farm_CV90.axis2                 = -27893.451546568875 -2440.3607969344307 0.0
CV_z90hh.Farm_CV90.normal                = 0.0 0.0 0.0         
TR_z60ti.Farm_TR60.type                  = PlaneSampler        
TR_z60ti.Farm_TR60.num_points            = 176 421             
TR_z60ti.Farm_TR60.origin                = 674791.6460874033 4041868.3236167836 60.0
TR_z60ti.Farm_TR60.axis1                 = -1525.2254980840191 17433.40721660555 0.0
TR_z60ti.Farm_TR60.axis2                 = -41840.17731985331 -3660.541195401646 0.0
TR_z60ti.Farm_TR60.normal                = 0.0 0.0 0.0         
KP_z60ti.Farm_KP60.type                  = PlaneSampler        
KP_z60ti.Farm_KP60.num_points            = 141 251             
KP_z60ti.Farm_KP60.origin                = 653106.1017967543 4023617.986548658 60.0
KP_z60ti.Farm_KP60.axis1                 = -1220.1803984672154 13946.725773284437 0.0
KP_z60ti.Farm_KP60.axis2                 = -24904.867452293638 -2178.893568691456 0.0
KP_z60ti.Farm_KP60.normal                = 0.0 0.0 0.0         
AF_z60ti.Farm_AF60.type                  = PlaneSampler        
AF_z60ti.Farm_AF60.num_points            = 201 251             
AF_z60ti.Farm_AF60.origin                = 643411.146896371 4008131.3051053365 60.0
AF_z60ti.Farm_AF60.axis1                 = -1743.1148549531647 19923.89396183491 0.0
AF_z60ti.Farm_AF60.axis2                 = -24904.867452293638 -2178.893568691456 0.0
AF_z60ti.Farm_AF60.normal                = 0.0 0.0 0.0         
BR_z60ti.Farm_BR60.type                  = PlaneSampler        
BR_z60ti.Farm_BR60.num_points            = 71 181              
BR_z60ti.Farm_BR60.origin                = 627314.3752538164 4031799.622892362 60.0
BR_z60ti.Farm_BR60.axis1                 = -610.0901992336077 6973.362886642219 0.0
BR_z60ti.Farm_BR60.axis2                 = -17931.50456565142 -1568.8033694578482 0.0
BR_z60ti.Farm_BR60.normal                = 0.0 0.0 0.0         
CV_z60ti.Farm_CV60.type                  = PlaneSampler        
CV_z60ti.Farm_CV60.num_points            = 151 281             
CV_z60ti.Farm_CV60.origin                = 632818.2832007611 4041258.2334175496 60.0
CV_z60ti.Farm_CV60.axis1                 = -1307.3361412148736 14942.920471376183 0.0
CV_z60ti.Farm_CV60.axis2                 = -27893.451546568875 -2440.3607969344307 0.0
CV_z60ti.Farm_CV60.normal                = 0.0 0.0 0.0         

#---- extra params ----
amr.blocking_factor                      = 32                  
amr.max_grid_size                        = 64                  
#== END AMR-WIND INPUT ==
